<div class="controls">
    <label for="inputText">テキストを入力:</label>
    <input type="text" id="inputText" placeholder="ここにテキストを入力" />
    
    <br><br>
    <button id="applyText">テキストを適用</button>
    
    <br><br>
    <button id="toggleAdmin">管理モード</button>
    
    <div id="adminControls" class="hidden">
        <label for="fontSize">フォントサイズ:</label>
        <input type="number" id="fontSize" value="30" min="10" max="100" />
        
        <br><br>
        <label for="fontFamily">フォント:</label>
        <select id="fontFamily">
            <option value="Arial">Arial</option>
            <option value="Courier">Courier</option>
            <option value="Verdana">Verdana</option>
        </select>
    </div>

    <br><br>
    <button id="downloadButton">画像をダウンロード</button>
</div>

<script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const inputText = document.getElementById("inputText");
    const applyTextButton = document.getElementById("applyText");
    const downloadButton = document.getElementById("downloadButton");
    const adminControls = document.getElementById("adminControls");
    const toggleAdminButton = document.getElementById("toggleAdmin");
    const fontSizeInput = document.getElementById("fontSize");
    const fontFamilySelect = document.getElementById("fontFamily");

    let fontSize = 30;
    let fontFamily = "Arial";

    // 初期画像のロード
    const image = new Image();
    image.src = "your-image-path.jpg"; // 使用する画像のパス
    image.onload = () => {
        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
    };

    // テキストをキャンバスに追加
    function applyText() {
        ctx.clearRect(0, 0, canvas.width, canvas.height); // 画像を消去
        ctx.drawImage(image, 0, 0, canvas.width, canvas.height); // 再描画
        ctx.font = `${fontSize}px ${fontFamily}`;
        ctx.fillText(inputText.value, 50, 100); // テキストの位置
    }

    // 管理モードのトグル
    toggleAdminButton.addEventListener("click", () => {
        adminControls.classList.toggle("hidden");
    });

    // テキストを適用
    applyTextButton.addEventListener("click", applyText);

    // フォントサイズの変更
    fontSizeInput.addEventListener("input", (e) => {
        fontSize = e.target.value;
        applyText();
    });

    // フォント変更
    fontFamilySelect.addEventListener("change", (e) => {
        fontFamily = e.target.value;
        applyText();
    });

    // 画像のダウンロード
    downloadButton.addEventListener("click", () => {
        const link = document.createElement("a");
        link.download = "image_with_text.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
    });
</script>
